<!DOCTYPE html>
<html lang="en">
<head>
    <title>Login - LMS</title>
    <link rel="stylesheet" href="styles.css">

</head>
<body>
    <header>
        <img src="logo.jpg" alt="LMS Logo" style="width: 100px; height: 100px;">
        <h1>LMS - Learning Management System</h1>
    </header>
    <div>
        <nav>
            <a href="index.html">Homepage</a>
        </nav>
    </div>
    <main id="loginmain">
        <h2>LMS Login</h2>

        <form id="login-form">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required><br><br>
            
            <label for="password">Password:</label> 
            <input type="password" id="password" name="password" required><br><br>
        </form>
        <login id="login">
            <button id = "loginbutton">Login</button>
            <br>
            <a href="#">Forgot Password?</a> 
            <br>
            <a href="signup.html">Don't have an account? Sign Up</a>
        </login>
    </main>
    <footer>
        <p>&copy; 2025 LMS. All rights reserved.</p>
    </footer>
    <script>
        const main = document.getElementById("loginmain");
        const container = document.createElement("div")
        main.appendChild(container);

        async function validateLogin() {
            container.id = "messagebox";
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            const messageBox = document.createElement("p");
            //messageBox.id = "messagebox";
            //main.appendChild(messageBox);
            container.appendChild(messageBox);
            
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/users');
                const users = await response.json();
                
                const user = users.find(user => user.username === username && user.email === password);
                
                if (user) {
                    messageBox.textContent = "Login successful! Redirecting...";
                    setTimeout(() => {
                        window.location.href = 'course_view.html';
                    }, 2000);
                } else {
                    messageBox.textContent = "Invalid username or password.";
                }
            } catch (error) {
                messageBox.textContent = "Error connecting to server. Please try again.";
            }
        }

        var login_button = document.getElementById("loginbutton");
        login_button.addEventListener("click", () => {validateLogin()});
    </script>
</body>
</html>
